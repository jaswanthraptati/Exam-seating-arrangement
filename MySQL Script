-- Create the database
CREATE DATABASE IF NOT EXISTS exam_system;
USE exam_system;

-- Create the Students Table
CREATE TABLE IF NOT EXISTS students (
    roll_number VARCHAR(20) PRIMARY KEY,
    name VARCHAR(100) NOT NULL
);

-- Create the Rooms Table
CREATE TABLE IF NOT EXISTS rooms (
    room_number VARCHAR(20) PRIMARY KEY,
    capacity INT NOT NULL
);

-- Create the Seating Arrangements Table
CREATE TABLE IF NOT EXISTS seating_arrangements (
    student_id VARCHAR(20),
    room_number VARCHAR(20),
    seat_number INT,
    PRIMARY KEY (student_id, room_number, seat_number),
    FOREIGN KEY (student_id) REFERENCES students(roll_number) ON DELETE CASCADE,
    FOREIGN KEY (room_number) REFERENCES rooms(room_number) ON DELETE CASCADE
);

-- Sample Data Insertion (Students)
INSERT INTO students (roll_number, name) VALUES
('S001', 'Alice'),
('S002', 'Bob'),
('S003', 'Charlie'),
('S004', 'David'),
('S005', 'Eva');

-- Sample Data Insertion (Rooms)
INSERT INTO rooms (room_number, capacity) VALUES
('R101', 50),
('R102', 30),
('R103', 40);

-- Sample Data Insertion (Seating Arrangements)
INSERT INTO seating_arrangements (student_id, room_number, seat_number) VALUES
('S001', 'R101', 1),
('S002', 'R101', 2),
('S003', 'R102', 1),
('S004', 'R103', 1),
('S005', 'R103', 2);

-- Admin Credentials Table
CREATE TABLE IF NOT EXISTS admin_credentials (
    username VARCHAR(50) PRIMARY KEY,
    password VARCHAR(100) NOT NULL
);

-- Sample Admin Account
INSERT INTO admin_credentials (username, password) VALUES
('admin', 'adminpassword');
